<div class="profile-background">
    <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner">
        <div class="carousel-item active">
            <%= cl_image_tag @farmer.farmer_photos.first.data, height: 500, style: 'object-fit: cover', class: "d-block w-100" %>
        </div>
        <% @farmer.farmer_photos.each do |photo| %>
        <div class="carousel-item">
            <%= cl_image_tag photo.data, height: 500,  style: 'object-fit: cover', class: "d-block w-100" %>
        </div>
        <% end %>
    </div>
    <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
    </div>
    <div class="container-f profile-infos" >
        <%= cl_image_tag @farmer.user.avatar, class: 'profile-avatar avatar-l-bordered', crop: :fill, height: 180 %>
        <div class="profile-text">
            <div class="name-location">
                <h1><%= @farmer.name %></h1>
                <h2><%= @farmer.address %></h2>
            </div>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centurie</p>
        </div>
    </div>
</div>
<div class="container-f product-show">
    <div class='category'>
        <% if current_user.role == "Farmer" %>
            <%= link_to new_product_path do %>
                <ion-icon name="add-circle-outline"
                        class="icon-position">
                </ion-icon>
            <% end %>
        <% end %>
        <h3>Fruits</h3>
        <h3>Dairy</h3>
        <h3>Meat</h3>
        <h3>veggies</h3>
    </div>
    <div>
        <div class="form-group-f">
            <%= form_tag farmer_path(@farmer), method: :get, class:'form-group-f' do %>
                <%= text_field_tag :query,
                    params[:query],
                    class: "input-f input-search",
                    placeholder: "Search for product name , product category eg: Cheese, "
                %>
                <i class="fas fa-search searchf-f" 
                style="position: absolute;
                        top: 63px;
                        left: 1040px;
                        font-size: 40px;">
                </i>
            <% end %>
        </div>
        <div class='cards-container row'>
        <% @products.each do |product| %>
                <div class="col-lg-4">
                <div class='product-card'>
                    <div class='card-img' style="background-image: linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.1)), url('<%= cl_image_path product.product_photos.first.data, height: 160, width: 335, crop: :fill %>')">
                        <% if current_user.role == "Restaurant" %>
                            <%= link_to product_order_products_path(product), method: :post, class: "add-b" , style: 'font-size: 30px; color: white;' do %>
                                <ion-icon name="add-circle-outline"></ion-icon>
                            <% end %>
                        <% end %>
                    </div>
                    <div class='card-details'>
                        <div class='rows'>
                            <h4><%= product.name %></h4>
                            <% if current_user.id != params[:id].to_i %>
                                <%= link_to cl_image_tag(product.farmer.user.avatar, class: 'photo-card avatar-bordered ', crop: :fill, height: 50), farmer_path(product.farmer)%>
                            <% end %>
                        </div>
                        <div class='rows'>
                            <p>⭐️️️️️️️⭐️⭐️⭐️<%=product.rating%> </p>
                            <p>$<%=product.price%> / <small><%=product.unit_of_measurement%></small></p>
                        </div>
                    </div>
                </div>
                </div>
                
            <% end %>
        </div>
    </div>
</div>