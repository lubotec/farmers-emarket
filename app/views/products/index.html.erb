<div class="container-f product-show">
    <div class='category', style="margin-top: 160px">
        <p><%= link_to "Clear filter", products_path, class: "cat-item", style:"font-weight: lighter" %></p>
        <h3><%= link_to "Fruits", products_path(query: {category: "Fruits"}), class: "cat-item #{'green-underline bold' if selected_category?("Fruits") }" %></h3>
        <h3><%= link_to "Veggies", products_path(query: {category: "Vegetables"}), class: "cat-item #{'green-underline bold' if selected_category?("Vegetables") }" %></h3>
        <h3><%= link_to "Meat", products_path(query: {category: "Meat"}), class: "cat-item #{'green-underline bold' if selected_category?("Meat") }" %></h3>
        <h3><%= link_to "Dairy", products_path(query: {category: "Dairy"}), class: "cat-item #{'green-underline bold' if selected_category?("Dairy") }" %></h3>
    </div>
    <div>

        <div class="form-group-f">
            <%= simple_form_for :query, url: products_path, method: :get do |f| %>
            <div class="d-flex">
              <div class="d-flex mr-4">
                <%= f.input :text, label: "Search", placeholder: "Product or category", input_html: { value: params[:query].try(:[], :text) } %>
                <%= f.input :price, label: "Price", collection: ['Ascending', 'Descending'], selected: params[:query].try(:[], :price)  %>
                <%#= f.input :distance, label: "Distance", collection: ['< 5km', '5-10km', '10-20km', '20-50km'], selected: params[:query].try(:[], :distance)  %>
                <%= f.input :category, as: :hidden, input_html: { value: params[:query].try(:[], :category) } %>
              </div>
              <div>
                <%= f.submit "Search", class: "btn-f-d" %>
              </div>
            </div>
            <% end %>

        </div>

        <div class='cards-container row'>
        <% @products.each do |product| %>
                <div class="col-lg-4">
                <div class='product-card'>
                    <div class='card-img' style="background-image: linear-gradient(rgba(0,0,0,0.3),rgba(0,0,0,0.1)), url('<%= cl_image_path product.product_photos.first.data, height: 160, width: 335, crop: :fill %>')">
                        <% if current_user.role == "Restaurant" %>
                            <%= link_to product_order_products_path(product), method: :post, class: "add-b" , style: 'font-size: 30px; color: white;' do %>
                                <ion-icon name="add-circle-outline"></ion-icon>
                            <% end %>
                        <% end %>
                    </div>
                    <div class='card-details'>
                        <div class='rows'>
                            <h4><%= product.name %></h4>
                            <%= link_to cl_image_tag(product.farmer.user.avatar, class: 'photo-card avatar', crop: :fill, height: 50), farmer_path(product.farmer)%>
                        </div>
                        <div class='rows'>
                            <p>⭐️️️️️️️⭐️⭐️⭐️<%=product.rating%> </p>
                            <p>$<%=product.price%> / <small><%=product.unit_of_measurement%></small></p>
                        </div>
                    </div>
                </div>
                </div>

            <% end %>
        </div>
    </div>
</div>


